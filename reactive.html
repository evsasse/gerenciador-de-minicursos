<head>
  <title>Cadastro para Minicursos</title>
  <link href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,700' rel='stylesheet' type='text/css'>
</head>

<body>
  <header>
    {{> loginButtons}}
  </header>
  <main>
    {{> formInscricao}}

    {{#if isAdmin}}
      {{> controlCursos}}
      {{> controlAdmins}}
    {{/if}}
  </main>
</body>

<template name="formInscricao">
  <section>
    <form id="form-inscricao">
      <h2>Cadastro para Minicursos</h2>
      <input type="text" name="nome" placeholder="Nome">
      <input type="text" name="cpf" placeholder="CPF - 12345678912" required>
      <input type="email" name="email" placeholder="Email">
      <ul class="options">
      {{#each cursos}}
        {{#if habilitado}}
          <li>
            <input type="checkbox" id="cursoFormInscricao{{_id}}">
            <label for="cursoFormInscricao{{_id}}">{{nome}}</label>
            <p class="description">{{#markdown}}{{descricao}}{{/markdown}}</p>
          </li>
        {{else}}
          {{#if isAdmin}}
            <li class="disabled">
              <input type="checkbox" id="cursoFormInscricao{{_id}}">
              <label for="cursoFormInscricao{{_id}}">{{nome}}</label>
              <p class="description">
                (DESABILITADO)<br>
                {{#markdown}}{{descricao}}{{/markdown}}
              </p>
            </li>
          {{/if}}
        {{/if}}
      {{/each}}
      </ul>
      <input type="submit" value="Enviar">
    </form>
  </section>
</template>

<template name="controlCursos">
  <section id="control-cursos">
    <h2>Controle dos Minicursos</h2>
    <ul>
      {{#each cursos}}
        <li>
          {{> controlCurso}}
        </li>
      {{/each}}
      <li>
        <form id="create-curso">
          <input type="text" name="nome" placeholder="Nome">
          <input type="submit" value="Criar">
        </form>
      </li>
    </ul>
  </section>
</template>

<template name="controlCurso">
  {{nome}}
  <button class="remove" title="Excluir Curso"></button>
  <button class="show-edit" title="Editar"></button>
  {{#if habilitado}}
    <button class="enabled" title="Desabilitar"></button>
  {{else}}
    <button class="disabled" title="Habilitar"></button>
  {{/if}}
  {{#if showEdit}}
    <form class="edit-curso">
      <input type="text" name="nome" placeholder="nome" value="{{nome}}">
      <textarea name="descricao" placeholder="Descrição - Em Markdown">{{descricao}}</textarea>
      <input type="submit" value="Editar">
    </form>
  {{/if}}
  <ul>
    {{#each participantes}}
      <li>
        {{> controlParticipante}}
      </li>
    {{/each}}
  </ul>
</template>

<template name="controlParticipante">
  {{nome}} {{cpf}} {{email}}
</template>

<template name="controlAdmins">
  <section id="control-admins">
    <ul>
      {{#each users}}
        <li>
          {{> controlAdmin}}
        </li>
      {{/each}}
    </ul>
  </section>
</template>

<template name="controlAdmin">
  {{#if admin}}
    <button class="enabled" title="Tirar de Administrador"></button>
  {{else}}
    <button class="disabled" title="Tornar Administrador"></button>
  {{/if}}
  {{services.google.name}}
  <p class="description">
    {{services.google.email}}
  </p>
</template>
